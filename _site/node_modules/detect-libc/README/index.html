<h1>detect-libc</h1>
<p>Node.js module to detect the C standard library (libc) implementation
family and version in use on a given Linux system.</p>
<p>Provides a value suitable for use with the <code>LIBC</code> option of
<a href="https://www.npmjs.com/package/prebuild">prebuild</a>,
<a href="https://www.npmjs.com/package/prebuild-ci">prebuild-ci</a> and
<a href="https://www.npmjs.com/package/prebuild-install">prebuild-install</a>,
therefore allowing build and provision of pre-compiled binaries
for musl-based Linux e.g. Alpine as well as glibc-based.</p>
<p>Currently supports libc detection of <code>glibc</code> and <code>musl</code>.</p>
<h2>Install</h2>
<pre><code class="language-sh">npm install detect-libc
</code></pre>
<h2>Usage</h2>
<h3>API</h3>
<pre><code class="language-js">const { GLIBC, MUSL, family, version, isNonGlibcLinux } = require('detect-libc');
</code></pre>
<ul>
<li><code>GLIBC</code> is a String containing the value &quot;glibc&quot; for comparison with <code>family</code>.</li>
<li><code>MUSL</code> is a String containing the value &quot;musl&quot; for comparison with <code>family</code>.</li>
<li><code>family</code> is a String representing the system libc family.</li>
<li><code>version</code> is a String representing the system libc version number.</li>
<li><code>isNonGlibcLinux</code> is a Boolean representing whether the system is a non-glibc Linux, e.g. Alpine.</li>
</ul>
<h3>detect-libc command line tool</h3>
<p>When run on a Linux system with a non-glibc libc,
the child command will be run with the <code>LIBC</code> environment variable
set to the relevant value.</p>
<p>On all other platforms will run the child command as-is.</p>
<p>The command line feature requires <code>spawnSync</code> provided by Node v0.12+.</p>
<pre><code class="language-sh">detect-libc child-command
</code></pre>
<h2>Integrating with prebuild</h2>
<pre><code class="language-json">  &quot;scripts&quot;: {
    &quot;install&quot;: &quot;detect-libc prebuild-install || node-gyp rebuild&quot;,
    &quot;test&quot;: &quot;mocha &amp;&amp; detect-libc prebuild-ci&quot;
  },
  &quot;dependencies&quot;: {
    &quot;detect-libc&quot;: &quot;^1.0.2&quot;,
    &quot;prebuild-install&quot;: &quot;^2.2.0&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;prebuild&quot;: &quot;^6.2.1&quot;,
    &quot;prebuild-ci&quot;: &quot;^2.2.3&quot;
  }
</code></pre>
<h2>Licence</h2>
<p>Copyright 2017 Lovell Fuller</p>
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at <a href="http://www.apache.org/licenses/LICENSE-2.0.html">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
