<h1>CMake.js</h1>
<p><a href="https://github.com/cmake-js/cmake-js"><strong>CMake.js</strong></a> is a build tool that allow native addon developers to compile their
C or C++ code into executable form. It works like <strong><a href="node-gyp.md">node-gyp</a></strong> but
instead of Google's <a href="https://gyp.gsrc.io"><strong>gyp</strong></a> tool it is based on the <a href="https://cmake.org"><strong>CMake</strong></a> build system.</p>
<h2>Quick Start</h2>
<h3>Install CMake</h3>
<p>CMake.js requires that CMake be installed. Installers for a variety of platforms can be found on the <a href="https://cmake.org">CMake website</a>.</p>
<h3>Install CMake.js</h3>
<p>For developers, CMake.js is typically installed as a global package:</p>
<pre><code class="language-bash">npm install -g cmake-js
cmake-js --help
</code></pre>
<blockquote>
<p>For <em>users</em> of your native addon, CMake.js should be configured as a dependency in your <code>package.json</code> as described in the <a href="https://github.com/cmake-js/cmake-js">CMake.js documentation</a>.</p>
</blockquote>
<h3>CMakeLists.txt</h3>
<p>Your project will require a <code>CMakeLists.txt</code> file. The <a href="https://github.com/cmake-js/cmake-js#usage">CMake.js README file</a> shows what's necessary.</p>
<h3>NAPI_VERSION</h3>
<p>When building N-API addons, it's crucial to specify the N-API version your code is designed to work with. With CMake.js, this information is specified in the <code>CMakeLists.txt</code> file:</p>
<pre><code>add_definitions(-DNAPI_VERSION=3)
</code></pre>
<p>Since N-API is ABI-stable, your N-API addon will work, without recompilation, with the N-API version you specify in <code>NAPI_VERSION</code> and all subsequent N-API versions.</p>
<p>In the absence of a need for features available only in a specific N-API version, version 3 is a good choice as it is the version of N-API that was active when N-API left experimental status.</p>
<h3>NAPI_EXPERIMENTAL</h3>
<p>The following line in the <code>CMakeLists.txt</code> file will enable N-API experimental features if your code requires them:</p>
<pre><code>add_definitions(-DNAPI_EXPERIMENTAL)
</code></pre>
<h3>node-addon-api</h3>
<p>If your N-API native add-on uses the optional <a href="https://github.com/nodejs/node-addon-api#node-addon-api-module"><strong>node-addon-api</strong></a> C++ wrapper, the <code>CMakeLists.txt</code> file requires additional configuration information as described on the <a href="https://github.com/cmake-js/cmake-js#n-api-and-node-addon-api">CMake.js README file</a>.</p>
<h2>Example</h2>
<p>A working example of an N-API native addon built using CMake.js can be found on the <a href="https://github.com/nodejs/node-addon-examples/tree/master/build_with_cmake#building-n-api-addons-using-cmakejs">node-addon-examples repository</a>.</p>
<h2><strong>CMake</strong> Reference</h2>
<ul>
<li><a href="https://github.com/cmake-js/cmake-js#installation">Installation</a></li>
<li><a href="https://github.com/cmake-js/cmake-js#usage">How to use</a></li>
<li><a href="https://github.com/cmake-js/cmake-js#n-api-and-node-addon-api">Using N-API and node-addon-api</a></li>
<li><a href="https://github.com/cmake-js/cmake-js#tutorials">Tutorials</a></li>
<li><a href="https://github.com/cmake-js/cmake-js#use-case-in-the-works---arrayfirejs">Use case in the works - ArrayFire.js</a></li>
</ul>
<p>Sometimes finding the right settings is not easy so to accomplish at most
complicated task please refer to:</p>
<ul>
<li><a href="https://cmake.org/">CMake documentation</a></li>
<li><a href="https://github.com/cmake-js/cmake-js/wiki">CMake.js wiki</a></li>
</ul>
