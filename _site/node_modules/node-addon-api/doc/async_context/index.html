<h1>AsyncContext</h1>
<p>The <a href="async_worker.md">Napi::AsyncWorker</a> class may not be appropriate for every
scenario. When using any other async mechanism, introducing a new class
<code>Napi::AsyncContext</code> is necessary to ensure an async operation is properly
tracked by the runtime. The <code>Napi::AsyncContext</code> class can be passed to
<a href="function.md">Napi::Function::MakeCallback()</a> method to properly restore the
correct async execution context.</p>
<h2>Methods</h2>
<h3>Constructor</h3>
<p>Creates a new <code>Napi::AsyncContext</code>.</p>
<pre><code class="language-cpp">explicit Napi::AsyncContext::AsyncContext(napi_env env, const char* resource_name);
</code></pre>
<ul>
<li><code>[in] env</code>: The environment in which to create the <code>Napi::AsyncContext</code>.</li>
<li><code>[in] resource_name</code>: Null-terminated strings that represents the
identifier for the kind of resource that is being provided for diagnostic
information exposed by the <code>async_hooks</code> API.</li>
</ul>
<h3>Constructor</h3>
<p>Creates a new <code>Napi::AsyncContext</code>.</p>
<pre><code class="language-cpp">explicit Napi::AsyncContext::AsyncContext(napi_env env, const char* resource_name, const Napi::Object&amp; resource);
</code></pre>
<ul>
<li><code>[in] env</code>: The environment in which to create the <code>Napi::AsyncContext</code>.</li>
<li><code>[in] resource_name</code>: Null-terminated strings that represents the
identifier for the kind of resource that is being provided for diagnostic
information exposed by the <code>async_hooks</code> API.</li>
<li><code>[in] resource</code>: Object associated with the asynchronous operation that
will be passed to possible <code>async_hooks</code>.</li>
</ul>
<h3>Destructor</h3>
<p>The <code>Napi::AsyncContext</code> to be destroyed.</p>
<pre><code class="language-cpp">virtual Napi::AsyncContext::~AsyncContext();
</code></pre>
<h3>Env</h3>
<p>Requests the environment in which the async context has been initially created.</p>
<pre><code class="language-cpp">Napi::Env Env() const;
</code></pre>
<p>Returns the <code>Napi::Env</code> environment in which the async context has been created.</p>
<h2>Operator</h2>
<pre><code class="language-cpp">Napi::AsyncContext::operator napi_async_context() const;
</code></pre>
<p>Returns the N-API <code>napi_async_context</code> wrapped by the <code>Napi::AsyncContext</code>
object. This can be used to mix usage of the C N-API and node-addon-api.</p>
<h2>Example</h2>
<pre><code class="language-cpp">#include &quot;napi.h&quot;

void MakeCallbackWithAsyncContext(const Napi::CallbackInfo&amp; info) {
  Napi::Function callback = info[0].As&lt;Napi::Function&gt;();
  Napi::Object resource = info[1].As&lt;Napi::Object&gt;();

  // Create a new async context instance.
  Napi::AsyncContext context(info.Env(), &quot;async_context_test&quot;, resource);

  // Invoke the callback with the async context instance.
  callback.MakeCallback(Napi::Object::New(info.Env()),
      std::initializer_list&lt;napi_value&gt;{}, context);

  // The async context instance is automatically destroyed here because it's
  // block-scope like `Napi::HandleScope`.
}
</code></pre>
