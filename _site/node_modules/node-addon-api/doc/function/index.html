<h1>Function</h1>
<p>The <code>Napi::Function</code> class provides a set of methods for creating a function object in
native code that can later be called from JavaScript. The created function is not
automatically visible from JavaScript. Instead it needs to be part of the add-on's
module exports or be returned by one of the module's exported functions.</p>
<p>In addition the <code>Napi::Function</code> class also provides methods that can be used to call
functions that were created in JavaScript and passed to the native add-on.</p>
<p>The <code>Napi::Function</code> class inherits its behavior from the <code>Napi::Object</code> class (for more info
see: <a href="object.md"><code>Napi::Object</code></a>).</p>
<blockquote>
<p>For callbacks that will be called with asynchronous events from a
non-JavaScript thread, please refer to <a href="./threadsafe_function.md"><code>Napi::ThreadSafeFunction</code></a> for more
examples.</p>
</blockquote>
<h2>Example</h2>
<pre><code class="language-cpp">#include &lt;napi.h&gt;

using namespace Napi;

Value Fn(const CallbackInfo&amp; info) {
  Env env = info.Env();
  // ...
  return String::New(env, &quot;Hello World&quot;);
}

Object Init(Env env, Object exports) {
  exports.Set(String::New(env, &quot;fn&quot;), Function::New&lt;Fn&gt;(env));
  return exports;
}

NODE_API_MODULE(NODE_GYP_MODULE_NAME, Init)
</code></pre>
<p>The above code can be used from JavaScript as follows:</p>
<pre><code class="language-js">const addon = require('./addon');
addon.fn();
</code></pre>
<p>With the <code>Napi::Function</code> class it is possible to call a JavaScript function object
from a native add-on with two different methods: <code>Call</code> and <code>MakeCallback</code>.
The API of these two methods is very similar, but they are used in different
contexts. The <code>MakeCallback</code> method is used to call from native code back into
JavaScript after returning from an <a href="async_operations.md">asynchronous operation</a>
and in general in situations which don't have an existing JavaScript function on
the stack. The <code>Call</code> method is used when there is already a JavaScript function
on the stack (for example when running a native method called from JavaScript).</p>
<h2>Type definitions</h2>
<h3>Napi::Function::VoidCallback</h3>
<p>This is the type describing a callback returning <code>void</code> that will be invoked
from JavaScript.</p>
<pre><code class="language-cpp">typedef void (*VoidCallback)(const Napi::CallbackInfo&amp; info);
</code></pre>
<h3>Napi::Function::Callback</h3>
<p>This is the type describing a callback returning a value that will be invoked
from JavaScript.</p>
<pre><code class="language-cpp">typedef Value (*Callback)(const Napi::CallbackInfo&amp; info);
</code></pre>
<h2>Methods</h2>
<h3>Constructor</h3>
<p>Creates a new empty instance of <code>Napi::Function</code>.</p>
<pre><code class="language-cpp">Napi::Function::Function();
</code></pre>
<h3>Constructor</h3>
<p>Creates a new instance of the <code>Napi::Function</code> object.</p>
<pre><code class="language-cpp">Napi::Function::Function(napi_env env, napi_value value);
</code></pre>
<ul>
<li><code>[in] env</code>: The <code>napi_env</code> environment in which to construct the <code>Napi::Function</code> object.</li>
<li><code>[in] value</code>: The <code>napi_value</code> which is a handle for a JavaScript function.</li>
</ul>
<p>Returns a non-empty <code>Napi::Function</code> instance.</p>
<h3>New</h3>
<p>Creates an instance of a <code>Napi::Function</code> object.</p>
<pre><code class="language-cpp">template &lt;Napi::VoidCallback cb&gt;
static Napi::Function New(napi_env env,
                          const char* utf8name = nullptr,
                          void* data = nullptr);
</code></pre>
<ul>
<li><code>[template] cb</code>: The native function to invoke when the JavaScript function is
invoked.</li>
<li><code>[in] env</code>: The <code>napi_env</code> environment in which to construct the <code>Napi::Function</code> object.</li>
<li><code>[in] utf8name</code>: Null-terminated string to be used as the name of the function.</li>
<li><code>[in] data</code>: User-provided data context. This will be passed back into the
function when invoked later.</li>
</ul>
<p>Returns an instance of a <code>Napi::Function</code> object.</p>
<h3>New</h3>
<p>Creates an instance of a <code>Napi::Function</code> object.</p>
<pre><code class="language-cpp">template &lt;Napi::Callback cb&gt;
static Napi::Function New(napi_env env,
                          const char* utf8name = nullptr,
                          void* data = nullptr);
</code></pre>
<ul>
<li><code>[template] cb</code>: The native function to invoke when the JavaScript function is
invoked.</li>
<li><code>[in] env</code>: The <code>napi_env</code> environment in which to construct the <code>Napi::Function</code> object.</li>
<li><code>[in] utf8name</code>: Null-terminated string to be used as the name of the function.</li>
<li><code>[in] data</code>: User-provided data context. This will be passed back into the
function when invoked later.</li>
</ul>
<p>Returns an instance of a <code>Napi::Function</code> object.</p>
<h3>New</h3>
<p>Creates an instance of a <code>Napi::Function</code> object.</p>
<pre><code class="language-cpp">template &lt;Napi::VoidCallback cb&gt;
static Napi::Function New(napi_env env,
                          const std::string&amp; utf8name,
                          void* data = nullptr);
</code></pre>
<ul>
<li><code>[template] cb</code>: The native function to invoke when the JavaScript function is
invoked.</li>
<li><code>[in] env</code>: The <code>napi_env</code> environment in which to construct the <code>Napi::Function</code> object.</li>
<li><code>[in] utf8name</code>: String to be used as the name of the function.</li>
<li><code>[in] data</code>: User-provided data context. This will be passed back into the
function when invoked later.</li>
</ul>
<p>Returns an instance of a <code>Napi::Function</code> object.</p>
<h3>New</h3>
<p>Creates an instance of a <code>Napi::Function</code> object.</p>
<pre><code class="language-cpp">template &lt;Napi::Callback cb&gt;
static Napi::Function New(napi_env env,
                          const std::string&amp; utf8name,
                          void* data = nullptr);
</code></pre>
<ul>
<li><code>[template] cb</code>: The native function to invoke when the JavaScript function is
invoked.</li>
<li><code>[in] env</code>: The <code>napi_env</code> environment in which to construct the <code>Napi::Function</code> object.</li>
<li><code>[in] utf8name</code>: String to be used as the name of the function.</li>
<li><code>[in] data</code>: User-provided data context. This will be passed back into the
function when invoked later.</li>
</ul>
<p>Returns an instance of a <code>Napi::Function</code> object.</p>
<h3>New</h3>
<p>Creates an instance of a <code>Napi::Function</code> object.</p>
<pre><code class="language-cpp">template &lt;typename Callable&gt;
static Napi::Function Napi::Function::New(napi_env env, Callable cb, const char* utf8name = nullptr, void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] env</code>: The <code>napi_env</code> environment in which to construct the <code>Napi::Function</code> object.</li>
<li><code>[in] cb</code>: Object that implements <code>Callable</code>.</li>
<li><code>[in] utf8name</code>: Null-terminated string to be used as the name of the function.</li>
<li><code>[in] data</code>: User-provided data context. This will be passed back into the
function when invoked later.</li>
</ul>
<p>Returns an instance of a <code>Napi::Function</code> object.</p>
<h3>New</h3>
<pre><code class="language-cpp">template &lt;typename Callable&gt;
static Napi::Function Napi::Function::New(napi_env env, Callable cb, const std::string&amp; utf8name, void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] env</code>: The <code>napi_env</code> environment in which to construct the <code>Napi::Function</code> object.</li>
<li><code>[in] cb</code>: Object that implements <code>Callable</code>.</li>
<li><code>[in] utf8name</code>: String to be used as the name of the function.</li>
<li><code>[in] data</code>: User-provided data context. This will be passed back into the
function when invoked later.</li>
</ul>
<p>Returns an instance of a <code>Napi::Function</code> object.</p>
<h3>New</h3>
<p>Creates a new JavaScript value from one that represents the constructor for the
object.</p>
<pre><code class="language-cpp">Napi::Object Napi::Function::New(const std::initializer_list&lt;napi_value&gt;&amp; args) const;
</code></pre>
<ul>
<li><code>[in] args</code>: Initializer list of JavaScript values as <code>napi_value</code> representing
the arguments of the constructor function.</li>
</ul>
<p>Returns a new JavaScript object.</p>
<h3>New</h3>
<p>Creates a new JavaScript value from one that represents the constructor for the
object.</p>
<pre><code class="language-cpp">Napi::Object Napi::Function::New(const std::vector&lt;napi_value&gt;&amp; args) const;
</code></pre>
<ul>
<li><code>[in] args</code>: Vector of JavaScript values as <code>napi_value</code> representing the
arguments of the constructor function.</li>
</ul>
<p>Returns a new JavaScript object.</p>
<h3>New</h3>
<p>Creates a new JavaScript value from one that represents the constructor for the
object.</p>
<pre><code class="language-cpp">Napi::Object Napi::Function::New(size_t argc, const napi_value* args) const;
</code></pre>
<ul>
<li><code>[in] argc</code>: The number of the arguments passed to the constructor function.</li>
<li><code>[in] args</code>: Array of JavaScript values as <code>napi_value</code> representing the
arguments of the constructor function.</li>
</ul>
<p>Returns a new JavaScript object.</p>
<h3>Call</h3>
<p>Calls a Javascript function from a native add-on.</p>
<pre><code class="language-cpp">Napi::Value Napi::Function::Call(const std::initializer_list&lt;napi_value&gt;&amp; args) const;
</code></pre>
<ul>
<li><code>[in] args</code>: Initializer list of JavaScript values as <code>napi_value</code> representing
the arguments of the function.</li>
</ul>
<p>Returns a <code>Napi::Value</code> representing the JavaScript value returned by the function.</p>
<h3>Call</h3>
<p>Calls a JavaScript function from a native add-on.</p>
<pre><code class="language-cpp">Napi::Value Napi::Function::Call(const std::vector&lt;napi_value&gt;&amp; args) const;
</code></pre>
<ul>
<li><code>[in] args</code>: Vector of JavaScript values as <code>napi_value</code> representing the
arguments of the function.</li>
</ul>
<p>Returns a <code>Napi::Value</code> representing the JavaScript value returned by the function.</p>
<h3>Call</h3>
<p>Calls a Javascript function from a native add-on.</p>
<pre><code class="language-cpp">Napi::Value Napi::Function::Call(size_t argc, const napi_value* args) const;
</code></pre>
<ul>
<li><code>[in] argc</code>: The number of the arguments passed to the function.</li>
<li><code>[in] args</code>: Array of JavaScript values as <code>napi_value</code> representing the
arguments of the function.</li>
</ul>
<p>Returns a <code>Napi::Value</code> representing the JavaScript value returned by the function.</p>
<h3>Call</h3>
<p>Calls a Javascript function from a native add-on.</p>
<pre><code class="language-cpp">Napi::Value Napi::Function::Call(napi_value recv, const std::initializer_list&lt;napi_value&gt;&amp; args) const;
</code></pre>
<ul>
<li><code>[in] recv</code>: The <code>this</code> object passed to the called function.</li>
<li><code>[in] args</code>: Initializer list of JavaScript values as <code>napi_value</code> representing
the arguments of the function.</li>
</ul>
<p>Returns a <code>Napi::Value</code> representing the JavaScript value returned by the function.</p>
<h3>Call</h3>
<p>Calls a Javascript function from a native add-on.</p>
<pre><code class="language-cpp">Napi::Value Napi::Function::Call(napi_value recv, const std::vector&lt;napi_value&gt;&amp; args) const;
</code></pre>
<ul>
<li><code>[in] recv</code>: The <code>this</code> object passed to the called function.</li>
<li><code>[in] args</code>: Vector of JavaScript values as <code>napi_value</code> representing the
arguments of the function.</li>
</ul>
<p>Returns a <code>Napi::Value</code> representing the JavaScript value returned by the function.</p>
<h3>Call</h3>
<p>Calls a Javascript function from a native add-on.</p>
<pre><code class="language-cpp">Napi::Value Napi::Function::Call(napi_value recv, size_t argc, const napi_value* args) const;
</code></pre>
<ul>
<li><code>[in] recv</code>: The <code>this</code> object passed to the called function.</li>
<li><code>[in] argc</code>: The number of the arguments passed to the function.</li>
<li><code>[in] args</code>: Array of JavaScript values as <code>napi_value</code> representing the
arguments of the function.</li>
</ul>
<p>Returns a <code>Napi::Value</code> representing the JavaScript value returned by the function.</p>
<h3>MakeCallback</h3>
<p>Calls a Javascript function from a native add-on after an asynchronous operation.</p>
<pre><code class="language-cpp">Napi::Value Napi::Function::MakeCallback(napi_value recv, const std::initializer_list&lt;napi_value&gt;&amp; args, napi_async_context context = nullptr) const;
</code></pre>
<ul>
<li><code>[in] recv</code>: The <code>this</code> object passed to the called function.</li>
<li><code>[in] args</code>: Initializer list of JavaScript values as <code>napi_value</code> representing
the arguments of the function.</li>
<li><code>[in] context</code>: Context for the async operation that is invoking the callback.
This should normally be a value previously obtained from <a href="async_context.md">Napi::AsyncContext</a>.
However <code>nullptr</code> is also allowed, which indicates the current async context
(if any) is to be used for the callback.</li>
</ul>
<p>Returns a <code>Napi::Value</code> representing the JavaScript value returned by the function.</p>
<h3>MakeCallback</h3>
<p>Calls a Javascript function from a native add-on after an asynchronous operation.</p>
<pre><code class="language-cpp">Napi::Value Napi::Function::MakeCallback(napi_value recv, const std::vector&lt;napi_value&gt;&amp; args, napi_async_context context = nullptr) const;
</code></pre>
<ul>
<li><code>[in] recv</code>: The <code>this</code> object passed to the called function.</li>
<li><code>[in] args</code>: List of JavaScript values as <code>napi_value</code> representing the
arguments of the function.</li>
<li><code>[in] context</code>: Context for the async operation that is invoking the callback.
This should normally be a value previously obtained from <a href="async_context.md">Napi::AsyncContext</a>.
However <code>nullptr</code> is also allowed, which indicates the current async context
(if any) is to be used for the callback.</li>
</ul>
<p>Returns a <code>Napi::Value</code> representing the JavaScript value returned by the function.</p>
<h3>MakeCallback</h3>
<p>Calls a Javascript function from a native add-on after an asynchronous operation.</p>
<pre><code class="language-cpp">Napi::Value Napi::Function::MakeCallback(napi_value recv, size_t argc, const napi_value* args, napi_async_context context = nullptr) const;
</code></pre>
<ul>
<li><code>[in] recv</code>: The <code>this</code> object passed to the called function.</li>
<li><code>[in] argc</code>: The number of the arguments passed to the function.</li>
<li><code>[in] args</code>: Array of JavaScript values as <code>napi_value</code> representing the
arguments of the function.</li>
<li><code>[in] context</code>: Context for the async operation that is invoking the callback.
This should normally be a value previously obtained from <a href="async_context.md">Napi::AsyncContext</a>.
However <code>nullptr</code> is also allowed, which indicates the current async context
(if any) is to be used for the callback.</li>
</ul>
<p>Returns a <code>Napi::Value</code> representing the JavaScript value returned by the function.</p>
<h2>Operator</h2>
<pre><code class="language-cpp">Napi::Value Napi::Function::operator ()(const std::initializer_list&lt;napi_value&gt;&amp; args) const;
</code></pre>
<ul>
<li><code>[in] args</code>: Initializer list of JavaScript values as <code>napi_value</code>.</li>
</ul>
<p>Returns a <code>Napi::Value</code> representing the JavaScript value returned by the function.</p>
