<h1>Object Wrap</h1>
<p>Class <code>Napi::ObjectWrap&lt;T&gt;</code> inherits from class <a href="./instance_wrap.md"><code>Napi::InstanceWrap&lt;T&gt;</code></a>.</p>
<p>The <code>Napi::ObjectWrap&lt;T&gt;</code> class is used to bind the lifetime of C++ code to a
JavaScript object. Once bound, each time an instance of the JavaScript object
is created, an instance of the C++ class will also be created. When a method
is called on the JavaScript object which is defined as an InstanceMethod, the
corresponding C++ method on the wrapped C++ class will be invoked.</p>
<p>In order to create a wrapper it's necessary to extend the
<code>Napi::ObjectWrap&lt;T&gt;</code> class which contains all the plumbing to connect
JavaScript code with a C++ object. Classes extending <code>Napi::ObjectWrap</code> can be
instantiated from JavaScript using the <strong>new</strong> operator, and their methods can
be directly invoked from JavaScript. The <strong>wrap</strong> word refers to a way of
grouping methods and state of the class because it will be necessary write
custom code to bridge each of your C++ class methods.</p>
<h2>Example</h2>
<pre><code class="language-cpp">#include &lt;napi.h&gt;

class Example : public Napi::ObjectWrap&lt;Example&gt; {
  public:
    static Napi::Object Init(Napi::Env env, Napi::Object exports);
    Example(const Napi::CallbackInfo&amp; info);
    static Napi::Value CreateNewItem(const Napi::CallbackInfo&amp; info);

  private:
    double _value;
    Napi::Value GetValue(const Napi::CallbackInfo&amp; info);
    Napi::Value SetValue(const Napi::CallbackInfo&amp; info);
};

Napi::Object Example::Init(Napi::Env env, Napi::Object exports) {
    // This method is used to hook the accessor and method callbacks
    Napi::Function func = DefineClass(env, &quot;Example&quot;, {
        InstanceMethod&lt;&amp;Example::GetValue&gt;(&quot;GetValue&quot;),
        InstanceMethod&lt;&amp;Example::SetValue&gt;(&quot;SetValue&quot;),
        StaticMethod&lt;&amp;Example::CreateNewItem&gt;(&quot;CreateNewItem&quot;),
    });

    Napi::FunctionReference* constructor = new Napi::FunctionReference();

    // Create a persistent reference to the class constructor. This will allow
    // a function called on a class prototype and a function
    // called on instance of a class to be distinguished from each other.
    *constructor = Napi::Persistent(func);
    exports.Set(&quot;Example&quot;, func);

    // Store the constructor as the add-on instance data. This will allow this
    // add-on to support multiple instances of itself running on multiple worker
    // threads, as well as multiple instances of itself running in different
    // contexts on the same thread.
    //
    // By default, the value set on the environment here will be destroyed when
    // the add-on is unloaded using the `delete` operator, but it is also
    // possible to supply a custom deleter.
    env.SetInstanceData&lt;Napi::FunctionReference&gt;(constructor);

    return exports;
}

Example::Example(const Napi::CallbackInfo&amp; info) :
    Napi::ObjectWrap&lt;Example&gt;(info) {
  Napi::Env env = info.Env();
  // ...
  Napi::Number value = info[0].As&lt;Napi::Number&gt;();
  this-&gt;_value = value.DoubleValue();
}

Napi::Value Example::GetValue(const Napi::CallbackInfo&amp; info){
    Napi::Env env = info.Env();
    return Napi::Number::New(env, this-&gt;_value);
}

Napi::Value Example::SetValue(const Napi::CallbackInfo&amp; info){
    Napi::Env env = info.Env();
    // ...
    Napi::Number value = info[0].As&lt;Napi::Number&gt;();
    this-&gt;_value = value.DoubleValue();
    return this-&gt;GetValue(info);
}

// Initialize native add-on
Napi::Object Init (Napi::Env env, Napi::Object exports) {
    Example::Init(env, exports);
    return exports;
}

// Create a new item using the constructor stored during Init.
Napi::Value Example::CreateNewItem(const Napi::CallbackInfo&amp; info) {
  // Retrieve the instance data we stored during `Init()`. We only stored the
  // constructor there, so we retrieve it here to create a new instance of the
  // JS class the constructor represents.
  Napi::FunctionReference* constructor =
      info.Env().GetInstanceData&lt;Napi::FunctionReference&gt;();
  return constructor-&gt;New({ Napi::Number::New(info.Env(), 42) });
}

// Register and initialize native add-on
NODE_API_MODULE(NODE_GYP_MODULE_NAME, Init)
</code></pre>
<p>The above code can be used from JavaScript as follows:</p>
<pre><code class="language-js">'use strict'

const { Example } = require('bindings')('addon')

const example = new Example(11)
console.log(example.GetValue())
// It prints 11
example.SetValue(19)
console.log(example.GetValue());
// It prints 19
</code></pre>
<p>At initialization time, the <code>Napi::ObjectWrap::DefineClass()</code> method must be
used to hook up the accessor and method callbacks. It takes a list of property
descriptors, which can be constructed via the various static methods on the base
class.</p>
<p>When JavaScript code invokes the constructor, the constructor callback will
create a new C++ instance and &quot;wrap&quot; it into the newly created JavaScript
object.</p>
<p>When JavaScript code invokes a method or a property accessor on the class the
corresponding C++ callback function will be executed.</p>
<p>For a wrapped object it could be difficult to distinguish between a function
called on a class prototype and a function called on instance of a class.
Therefore it is good practice to save a persistent reference to the class
constructor. This allows the two cases to be distinguished from each other by
checking the this object against the class constructor.</p>
<h2>Methods</h2>
<h3>Constructor</h3>
<p>Creates a new instance of a JavaScript object that wraps native instance.</p>
<pre><code class="language-cpp">Napi::ObjectWrap(const Napi::CallbackInfo&amp; callbackInfo);
</code></pre>
<ul>
<li><code>[in] callbackInfo</code>: The object representing the components of the JavaScript
request being made.</li>
</ul>
<h3>Unwrap</h3>
<p>Retrieves a native instance wrapped in a JavaScript object.</p>
<pre><code class="language-cpp">static T* Napi::ObjectWrap::Unwrap(Napi::Object wrapper);
</code></pre>
<ul>
<li><code>[in] wrapper</code>: The JavaScript object that wraps the native instance.</li>
</ul>
<p>Returns a native instance wrapped in a JavaScript object. Given the
Napi:Object, this allows a method to get a pointer to the wrapped
C++ object and then reference fields, call methods, etc. within that class.
In many cases calling Unwrap is not required, as methods can
use the <code>this</code> field for ObjectWrap when running in a method on a
class that extends ObjectWrap.</p>
<h3>DefineClass</h3>
<p>Defnines a JavaScript class with constructor, static and instance properties and
methods.</p>
<pre><code class="language-cpp">static Napi::Function Napi::ObjectWrap::DefineClass(Napi::Env env,
                    const char* utf8name,
                    const std::initializer_list&lt;PropertyDescriptor&gt;&amp; properties,
                    void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] env</code>: The environment in which to construct a JavaScript class.</li>
<li><code>[in] utf8name</code>: Null-terminated string that represents the name of the
JavaScript constructor function.</li>
<li><code>[in] properties</code>: Initializer list of class property descriptor describing
static and instance properties and methods of the class.
See: <a href="class_property_descriptor.md"><code>Class property and descriptor</code></a>.</li>
<li><code>[in] data</code>: User-provided data passed to the constructor callback as <code>data</code>
property of the <code>Napi::CallbackInfo</code>.</li>
</ul>
<p>Returns a <code>Napi::Function</code> representing the constructor function for the class.</p>
<h3>DefineClass</h3>
<p>Defnines a JavaScript class with constructor, static and instance properties and
methods.</p>
<pre><code class="language-cpp">static Napi::Function Napi::ObjectWrap::DefineClass(Napi::Env env,
                            const char* utf8name,
                            const std::vector&lt;PropertyDescriptor&gt;&amp; properties,
                            void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] env</code>: The environment in which to construct a JavaScript class.</li>
<li><code>[in] utf8name</code>: Null-terminated string that represents the name of the
JavaScript constructor function.</li>
<li><code>[in] properties</code>: Vector of class property descriptor describing static and
instance properties and methods of the class.
See: <a href="class_property_descriptor.md"><code>Class property and descriptor</code></a>.</li>
<li><code>[in] data</code>: User-provided data passed to the constructor callback as <code>data</code>
property of the <code>Napi::CallbackInfo</code>.</li>
</ul>
<p>Returns a <code>Napi::Function</code> representing the constructor function for the class.</p>
<h3>Finalize</h3>
<p>Provides an opportunity to run cleanup code that requires access to the
<code>Napi::Env</code> before the wrapped native object instance is freed.  Override to
implement.</p>
<pre><code class="language-cpp">virtual void Finalize(Napi::Env env);
</code></pre>
<ul>
<li><code>[in] env</code>: <code>Napi::Env</code>.</li>
</ul>
<h3>StaticMethod</h3>
<p>Creates property descriptor that represents a static method of a JavaScript
class.</p>
<pre><code class="language-cpp">static Napi::PropertyDescriptor Napi::ObjectWrap::StaticMethod(
                             const char* utf8name,
                             StaticVoidMethodCallback method,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] utf8name</code>: Null-terminated string that represents the name of a static
method for the class.</li>
<li><code>[in] method</code>: The native function that represents a static method of a
JavaScript class.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into method when it is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents the static method of a
JavaScript class.</p>
<h3>StaticMethod</h3>
<p>Creates property descriptor that represents a static method of a JavaScript
class.</p>
<pre><code class="language-cpp">static Napi::PropertyDescriptor Napi::ObjectWrap::StaticMethod(
                             const char* utf8name,
                             StaticMethodCallback method,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] utf8name</code>: Null-terminated string that represents the name of a static
method for the class.</li>
<li><code>[in] method</code>: The native function that represents a static method of a
JavaScript class.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into method when it is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents a static method of a
JavaScript class.</p>
<h3>StaticMethod</h3>
<p>Creates property descriptor that represents a static method of a JavaScript
class.</p>
<pre><code class="language-cpp">static Napi::PropertyDescriptor Napi::ObjectWrap::StaticMethod(Symbol name,
                             StaticVoidMethodCallback method,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] name</code>: Napi:Symbol that represents the name of a static
method for the class.</li>
<li><code>[in] method</code>: The native function that represents a static method of a
JavaScript class.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into method when it is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents the static method of a
JavaScript class.</p>
<h3>StaticMethod</h3>
<p>Creates property descriptor that represents a static method of a JavaScript
class.</p>
<pre><code class="language-cpp">static Napi::PropertyDescriptor Napi::ObjectWrap::StaticMethod(Symbol name,
                             StaticMethodCallback method,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<p>method for the class.</p>
<ul>
<li><code>[in] name</code>: Napi:Symbol that represents the name of a static.</li>
<li><code>[in] method</code>: The native function that represents a static method of a
JavaScript class.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into method when it is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents a static method of a
JavaScript class.</p>
<h3>StaticMethod</h3>
<p>Creates property descriptor that represents a static method of a JavaScript
class.</p>
<pre><code class="language-cpp">template &lt;StaticVoidMethodCallback method&gt;
static Napi::PropertyDescriptor Napi::ObjectWrap::StaticMethod(
                             const char* utf8name,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] method</code>: The native function that represents a static method of a
JavaScript class. This function returns nothing.</li>
<li><code>[in] utf8name</code>: Null-terminated string that represents the name of a static
method for the class.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into method when it is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents the static method of a
JavaScript class.</p>
<h3>StaticMethod</h3>
<p>Creates property descriptor that represents a static method of a JavaScript
class.</p>
<pre><code class="language-cpp">template &lt;StaticMethodCallback method&gt;
static Napi::PropertyDescriptor Napi::ObjectWrap::StaticMethod(
                             const char* utf8name,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] method</code>: The native function that represents a static method of a
JavaScript class.</li>
<li><code>[in] utf8name</code>: Null-terminated string that represents the name of a static
method for the class.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into method when it is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents a static method of a
JavaScript class.</p>
<h3>StaticMethod</h3>
<p>Creates property descriptor that represents a static method of a JavaScript
class.</p>
<pre><code class="language-cpp">template &lt;StaticVoidMethodCallback method&gt;
static Napi::PropertyDescriptor Napi::ObjectWrap::StaticMethod(Symbol name,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] method</code>: The native function that represents a static method of a
JavaScript class.</li>
<li><code>[in] name</code>: Napi:Symbol that represents the name of a static
method for the class.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into method when it is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents the static method of a
JavaScript class.</p>
<h3>StaticMethod</h3>
<p>Creates property descriptor that represents a static method of a JavaScript
class.</p>
<pre><code class="language-cpp">template &lt;StaticMethodCallback method&gt;
static Napi::PropertyDescriptor Napi::ObjectWrap::StaticMethod(Symbol name,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] method</code>: The native function that represents a static method of a
JavaScript class.</li>
<li><code>[in] name</code>: Napi:Symbol that represents the name of a static.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into method when it is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents a static method of a
JavaScript class.</p>
<h3>StaticAccessor</h3>
<p>Creates property descriptor that represents a static accessor property of a
JavaScript class.</p>
<pre><code class="language-cpp">static Napi::PropertyDescriptor Napi::ObjectWrap::StaticAccessor(
                             const char* utf8name,
                             StaticGetterCallback getter,
                             StaticSetterCallback setter,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] utf8name</code>: Null-terminated string that represents the name of a static
accessor property for the class.</li>
<li><code>[in] getter</code>: The native function to call when a get access to the property
of a JavaScript class is performed.</li>
<li><code>[in] setter</code>: The native function to call when a set access to the property
of a JavaScript class is performed.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into getter or setter when
is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents a static accessor
property of a JavaScript class.</p>
<h3>StaticAccessor</h3>
<p>Creates property descriptor that represents a static accessor property of a
JavaScript class.</p>
<pre><code class="language-cpp">static Napi::PropertyDescriptor Napi::ObjectWrap::StaticAccessor(Symbol name,
                             StaticGetterCallback getter,
                             StaticSetterCallback setter,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] name</code>: Napi:Symbol that represents the name of a static accessor.</li>
<li><code>[in] getter</code>: The native function to call when a get access to the property
of a JavaScript class is performed.</li>
<li><code>[in] setter</code>: The native function to call when a set access to the property
of a JavaScript class is performed.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into getter or setter when
is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents a static accessor
property of a JavaScript class.</p>
<h3>StaticAccessor</h3>
<p>Creates property descriptor that represents a static accessor property of a
JavaScript class.</p>
<pre><code class="language-cpp">template &lt;StaticGetterCallback getter, StaticSetterCallback setter=nullptr&gt;
static Napi::PropertyDescriptor Napi::ObjectWrap::StaticAccessor(
                             const char* utf8name,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] getter</code>: The native function to call when a get access to the property
of a JavaScript class is performed.</li>
<li><code>[in] setter</code>: The native function to call when a set access to the property
of a JavaScript class is performed.</li>
<li><code>[in] utf8name</code>: Null-terminated string that represents the name of a static
accessor property for the class.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into getter or setter when
is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents a static accessor
property of a JavaScript class.</p>
<h3>StaticAccessor</h3>
<p>Creates property descriptor that represents a static accessor property of a
JavaScript class.</p>
<pre><code class="language-cpp">template &lt;StaticGetterCallback getter, StaticSetterCallback setter=nullptr&gt;
static Napi::PropertyDescriptor Napi::ObjectWrap::StaticAccessor(Symbol name,
                             napi_property_attributes attributes = napi_default,
                             void* data = nullptr);
</code></pre>
<ul>
<li><code>[in] getter</code>: The native function to call when a get access to the property
of a JavaScript class is performed.</li>
<li><code>[in] setter</code>: The native function to call when a set access to the property
of a JavaScript class is performed.</li>
<li><code>[in] name</code>: Napi:Symbol that represents the name of a static accessor.</li>
<li><code>[in] attributes</code>: The attributes associated with a particular property.
One or more of <code>napi_property_attributes</code>.</li>
<li><code>[in] data</code>: User-provided data passed into getter or setter when
is invoked.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents a static accessor
property of a JavaScript class.</p>
<h3>StaticValue</h3>
<p>Creates property descriptor that represents an static value property of a
JavaScript class.</p>
<pre><code class="language-cpp">static Napi::PropertyDescriptor Napi::ObjectWrap::StaticValue(
                            const char* utf8name,
                            Napi::Value value,
                            napi_property_attributes attributes = napi_default);
</code></pre>
<ul>
<li><code>[in] utf8name</code>: Null-terminated string that represents the name of the static
property.</li>
<li><code>[in] value</code>: The value that's retrieved by a get access of the property.</li>
<li><code>[in] attributes</code>: The attributes to be associated with the property in
addition to the napi_static attribute.  One or more of
<code>napi_property_attributes</code>.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents an static value
property of a JavaScript class</p>
<h3>StaticValue</h3>
<p>Creates property descriptor that represents an static value property of a
JavaScript class.</p>
<pre><code class="language-cpp">static Napi::PropertyDescriptor Napi::ObjectWrap::StaticValue(Symbol name,
                            Napi::Value value,
                            napi_property_attributes attributes = napi_default);
</code></pre>
<ul>
<li><code>[in] name</code>: The <code>Napi::Symbol</code> object whose value is used to identify the
name of the static property.</li>
<li><code>[in] value</code>: The value that's retrieved by a get access of the property.</li>
<li><code>[in] attributes</code>: The attributes to be associated with the property in
addition to the napi_static attribute.  One or more of
<code>napi_property_attributes</code>.</li>
</ul>
<p>Returns <code>Napi::PropertyDescriptor</code> object that represents an static value
property of a JavaScript class</p>
