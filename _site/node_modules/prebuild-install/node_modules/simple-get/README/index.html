<h1>simple-get <a href="https://travis-ci.org/feross/simple-get"><img src="https://img.shields.io/travis/feross/simple-get/master.svg" alt="travis"></a> <a href="https://npmjs.org/package/simple-get"><img src="https://img.shields.io/npm/v/simple-get.svg" alt="npm"></a> <a href="https://npmjs.org/package/simple-get"><img src="https://img.shields.io/npm/dm/simple-get.svg" alt="downloads"></a> <a href="https://standardjs.com"><img src="https://img.shields.io/badge/code_style-standard-brightgreen.svg" alt="javascript style guide"></a></h1>
<h3>Simplest way to make http get requests</h3>
<h2>features</h2>
<p>This module is the lightest possible wrapper on top of node.js <code>http</code>, but supporting these essential features:</p>
<ul>
<li>follows redirects</li>
<li>automatically handles gzip/deflate responses</li>
<li>supports HTTPS</li>
<li>supports specifying a timeout</li>
<li>supports convenience <code>url</code> key so there's no need to use <code>url.parse</code> on the url when specifying options</li>
<li>composes well with npm packages for features like cookies, proxies, form data, &amp; OAuth</li>
</ul>
<p>All this in &lt; 100 lines of code.</p>
<h2>install</h2>
<pre><code>npm install simple-get
</code></pre>
<h2>usage</h2>
<p>Note, all these examples also work in the browser with <a href="http://browserify.org/">browserify</a>.</p>
<h3>simple GET request</h3>
<p>Doesn't get easier than this:</p>
<pre><code class="language-js">const get = require('simple-get')

get('http://example.com', function (err, res) {
  if (err) throw err
  console.log(res.statusCode) // 200
  res.pipe(process.stdout) // `res` is a stream
})
</code></pre>
<h3>even simpler GET request</h3>
<p>If you just want the data, and don't want to deal with streams:</p>
<pre><code class="language-js">const get = require('simple-get')

get.concat('http://example.com', function (err, res, data) {
  if (err) throw err
  console.log(res.statusCode) // 200
  console.log(data) // Buffer('this is the server response')
})
</code></pre>
<h3>POST, PUT, PATCH, HEAD, DELETE support</h3>
<p>For <code>POST</code>, call <code>get.post</code> or use option <code>{ method: 'POST' }</code>.</p>
<pre><code class="language-js">const get = require('simple-get')

const opts = {
  url: 'http://example.com',
  body: 'this is the POST body'
}
get.post(opts, function (err, res) {
  if (err) throw err
  res.pipe(process.stdout) // `res` is a stream
})
</code></pre>
<h4>A more complex example:</h4>
<pre><code class="language-js">const get = require('simple-get')

get({
  url: 'http://example.com',
  method: 'POST',
  body: 'this is the POST body',

  // simple-get accepts all options that node.js `http` accepts
  // See: http://nodejs.org/api/http.html#http_http_request_options_callback
  headers: {
    'user-agent': 'my cool app'
  }
}, function (err, res) {
  if (err) throw err

  // All properties/methods from http.IncomingResponse are available,
  // even if a gunzip/inflate transform stream was returned.
  // See: http://nodejs.org/api/http.html#http_http_incomingmessage
  res.setTimeout(10000)
  console.log(res.headers)

  res.on('data', function (chunk) {
    // `chunk` is the decoded response, after it's been gunzipped or inflated
    // (if applicable)
    console.log('got a chunk of the response: ' + chunk)
  }))

})
</code></pre>
<h3>JSON</h3>
<p>You can serialize/deserialize request and response with JSON:</p>
<pre><code class="language-js">const get = require('simple-get')

const opts = {
  method: 'POST',
  url: 'http://example.com',
  body: {
    key: 'value'
  },
  json: true
}
get.concat(opts, function (err, res, data) {
  if (err) throw err
  console.log(data.key) // `data` is an object
})
</code></pre>
<h3>Timeout</h3>
<p>You can set a timeout (in milliseconds) on the request with the <code>timeout</code> option.
If the request takes longer than <code>timeout</code> to complete, then the entire request
will fail with an <code>Error</code>.</p>
<pre><code class="language-js">const get = require('simple-get')

const opts = {
  url: 'http://example.com',
  timeout: 2000 // 2 second timeout
}

get(opts, function (err, res) {})
</code></pre>
<h3>One Quick Tip</h3>
<p>It's a good idea to set the <code>'user-agent'</code> header so the provider can more easily
see how their resource is used.</p>
<pre><code class="language-js">const get = require('simple-get')
const pkg = require('./package.json')

get('http://example.com', {
  headers: {
    'user-agent': `my-module/${pkg.version} (https://github.com/username/my-module)`
  }
})
</code></pre>
<h3>Proxies</h3>
<p>You can use the <a href="https://github.com/koichik/node-tunnel"><code>tunnel</code></a> module with the
<code>agent</code> option to work with proxies:</p>
<pre><code class="language-js">const get = require('simple-get')
const tunnel = require('tunnel')

const opts = {
  url: 'http://example.com',
  agent: tunnel.httpOverHttp({
    proxy: {
      host: 'localhost'
    }
  })
}

get(opts, function (err, res) {})
</code></pre>
<h3>Cookies</h3>
<p>You can use the <a href="https://github.com/jshttp/cookie"><code>cookie</code></a> module to include
cookies in a request:</p>
<pre><code class="language-js">const get = require('simple-get')
const cookie = require('cookie')

const opts = {
  url: 'http://example.com',
  headers: {
    cookie: cookie.serialize('foo', 'bar')
  }
}

get(opts, function (err, res) {})
</code></pre>
<h3>Form data</h3>
<p>You can use the <a href="https://github.com/form-data/form-data"><code>form-data</code></a> module to
create POST request with form data:</p>
<pre><code class="language-js">const fs = require('fs')
const get = require('simple-get')
const FormData = require('form-data')
const form = new FormData()

form.append('my_file', fs.createReadStream('/foo/bar.jpg'))

const opts = {
  url: 'http://example.com',
  body: form
}

get.post(opts, function (err, res) {})
</code></pre>
<h4>Or, include <code>application/x-www-form-urlencoded</code> form data manually:</h4>
<pre><code class="language-js">const get = require('simple-get')

const opts = {
  url: 'http://example.com',
  form: {
    key: 'value'
  }
}
get.post(opts, function (err, res) {})
</code></pre>
<h3>Specifically disallowing redirects</h3>
<pre><code class="language-js">const get = require('simple-get')

const opts = {
  url: 'http://example.com/will-redirect-elsewhere',
  followRedirects: false
}
// res.statusCode will be 301, no error thrown
get(opts, function (err, res) {})
</code></pre>
<h3>OAuth</h3>
<p>You can use the <a href="https://github.com/ddo/oauth-1.0a"><code>oauth-1.0a</code></a> module to create
a signed OAuth request:</p>
<pre><code class="language-js">const get = require('simple-get')
const crypto  = require('crypto')
const OAuth = require('oauth-1.0a')

const oauth = OAuth({
  consumer: {
    key: process.env.CONSUMER_KEY,
    secret: process.env.CONSUMER_SECRET
  },
  signature_method: 'HMAC-SHA1',
  hash_function: (baseString, key) =&gt; crypto.createHmac('sha1', key).update(baseString).digest('base64')
})

const token = {
  key: process.env.ACCESS_TOKEN,
  secret: process.env.ACCESS_TOKEN_SECRET
}

const url = 'https://api.twitter.com/1.1/statuses/home_timeline.json'

const opts = {
  url: url,
  headers: oauth.toHeader(oauth.authorize({url, method: 'GET'}, token)),
  json: true
}

get(opts, function (err, res) {})
</code></pre>
<h3>Throttle requests</h3>
<p>You can use <a href="https://github.com/jhurliman/node-rate-limiter">limiter</a> to throttle requests. This is useful when calling an API that is rate limited.</p>
<pre><code class="language-js">const simpleGet = require('simple-get')
const RateLimiter = require('limiter').RateLimiter
const limiter = new RateLimiter(1, 'second')

const get = (opts, cb) =&gt; limiter.removeTokens(1, () =&gt; simpleGet(opts, cb))
get.concat = (opts, cb) =&gt; limiter.removeTokens(1, () =&gt; simpleGet.concat(opts, cb))

var opts = {
  url: 'http://example.com'
}

get.concat(opts, processResult)
get.concat(opts, processResult)

function processResult (err, res, data) {
  if (err) throw err
  console.log(data.toString())
}
</code></pre>
<h2>license</h2>
<p>MIT. Copyright (c) <a href="http://feross.org">Feross Aboukhadijeh</a>.</p>
