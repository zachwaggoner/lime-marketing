<h1>flat-cache</h1>
<blockquote>
<p>A stupidly simple key/value storage using files to persist the data</p>
</blockquote>
<p><a href="https://npmjs.org/package/flat-cache"><img src="http://img.shields.io/npm/v/flat-cache.svg?style=flat" alt="NPM Version"></a>
<a href="https://travis-ci.org/royriojas/flat-cache"><img src="http://img.shields.io/travis/royriojas/flat-cache.svg?style=flat" alt="Build Status"></a></p>
<h2>install</h2>
<pre><code class="language-bash">npm i --save flat-cache
</code></pre>
<h2>Usage</h2>
<pre><code class="language-js">var flatCache = require('flat-cache')
// loads the cache, if one does not exists for the given
// Id a new one will be prepared to be created
var cache = flatCache.load('cacheId');

// sets a key on the cache
cache.setKey('key', { foo: 'var' });

// get a key from the cache
cache.getKey('key') // { foo: 'var' }

// fetch the entire persisted object
cache.all() // { 'key': { foo: 'var' } }

// remove a key
cache.removeKey('key'); // removes a key from the cache

// save it to disk
cache.save(); // very important, if you don't save no changes will be persisted.
// cache.save( true /* noPrune */) // can be used to prevent the removal of non visited keys

// loads the cache from a given directory, if one does
// not exists for the given Id a new one will be prepared to be created
var cache = flatCache.load('cacheId', path.resolve('./path/to/folder'));

// The following methods are useful to clear the cache
// delete a given cache
flatCache.clearCacheById('cacheId') // removes the cacheId document if one exists.

// delete all cache
flatCache.clearAll(); // remove the cache directory
</code></pre>
<h2>Motivation for this module</h2>
<p>I needed a super simple and dumb <strong>in-memory cache</strong> with optional disk persistance in order to make
a script that will beutify files with <code>esformatter</code> only execute on the files that were changed since the last run.
To make that possible we need to store the <code>fileSize</code> and <code>modificationTime</code> of the files. So a simple <code>key/value</code>
storage was needed and Bam! this module was born.</p>
<h2>Important notes</h2>
<ul>
<li>If no directory is especified when the <code>load</code> method is called, a folder named <code>.cache</code> will be created
inside the module directory when <code>cache.save</code> is called. If you're committing your <code>node_modules</code> to any vcs, you
might want to ignore the default <code>.cache</code> folder, or specify a custom directory.</li>
<li>The values set on the keys of the cache should be <code>stringify-able</code> ones, meaning no circular references</li>
<li>All the changes to the cache state are done to memory</li>
<li>I could have used a timer or <code>Object.observe</code> to deliver the changes to disk, but I wanted to keep this module
intentionally dumb and simple</li>
<li>Non visited keys are removed when <code>cache.save()</code> is called. If this is not desired, you can pass <code>true</code> to the save call
like: <code>cache.save( true /* noPrune */ )</code>.</li>
</ul>
<h2>License</h2>
<p>MIT</p>
<h2>Changelog</h2>
<p><a href="./changelog.md">changelog</a></p>
