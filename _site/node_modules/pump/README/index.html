<h1>pump</h1>
<p>pump is a small node module that pipes streams together and destroys all of them if one of them closes.</p>
<pre><code>npm install pump
</code></pre>
<p><a href="http://travis-ci.org/mafintosh/pump"><img src="http://img.shields.io/travis/mafintosh/pump.svg?style=flat" alt="build status"></a></p>
<h2>What problem does it solve?</h2>
<p>When using standard <code>source.pipe(dest)</code> source will <em>not</em> be destroyed if dest emits close or an error.
You are also not able to provide a callback to tell when then pipe has finished.</p>
<p>pump does these two things for you</p>
<h2>Usage</h2>
<p>Simply pass the streams you want to pipe together to pump and add an optional callback</p>
<pre><code class="language-js">var pump = require('pump')
var fs = require('fs')

var source = fs.createReadStream('/dev/random')
var dest = fs.createWriteStream('/dev/null')

pump(source, dest, function(err) {
  console.log('pipe finished', err)
})

setTimeout(function() {
  dest.destroy() // when dest is closed pump will destroy source
}, 1000)
</code></pre>
<p>You can use pump to pipe more than two streams together as well</p>
<pre><code class="language-js">var transform = someTransformStream()

pump(source, transform, anotherTransform, dest, function(err) {
  console.log('pipe finished', err)
})
</code></pre>
<p>If <code>source</code>, <code>transform</code>, <code>anotherTransform</code> or <code>dest</code> closes all of them will be destroyed.</p>
<p>Similarly to <code>stream.pipe()</code>, <code>pump()</code> returns the last stream passed in, so you can do:</p>
<pre><code>return pump(s1, s2) // returns s2
</code></pre>
<p>If you want to return a stream that combines <em>both</em> s1 and s2 to a single stream use
<a href="https://github.com/mafintosh/pumpify">pumpify</a> instead.</p>
<h2>License</h2>
<p>MIT</p>
<h2>Related</h2>
<p><code>pump</code> is part of the <a href="https://github.com/maxogden/mississippi">mississippi stream utility collection</a> which includes more useful stream modules similar to this one.</p>
